!function(t){"use strict";var s,i=300;t.widget("apex.stickyWidget",{version:"5.1",widgetEventPrefix:"stickyWidget",options:{zIndexStart:-1,toggleHeight:!1,toggleWidth:!1,top:null,bottom:null,stickToEnd:!1,useWindow:!0,isFooter:!1,stick:null,unstick:null,stickEnd:null,unstickEnd:null},reStick:function(t){(this.stuck&&!this.stuckToEnd||t)&&(this.options.isFooter?this.element.css("position","fixed").css("bottom",this.options.bottom(this)):this.element.css("position","fixed").css("top",this.options.top(this)))},forceScrollParent:function(t){this._destroy(),s=t&&t.length>0?t:null,this.stuck=!1,this._create()},_stickToEnd:function(){var t,s,i;this.stuckToEnd||(this.stuckToEnd=!0,s=this.element,this.options.isFooter?(t=this.options.top.call(this),i="bottom"):(t=this.options.bottom.call(this)-s.outerHeight(),i="top"),s.css("bottom",""),s.css("position","absolute"),s.css("top",t-s.offsetParent().offset().top),this._trigger("stickEnd",null,{where:i,offset:t}))},_unstickFromEnd:function(){this.stuckToEnd&&(this.stuckToEnd=!1,this.options.isFooter&&this.element.css("top",""),this.stuck?(this.stuck=!1,this._stick()):(this.stuck=!0,this._unstick()),this._trigger("unstickEnd",null,{where:this.options.isFooter?"bottom":"top"}))},_stick:function(){if(!this.stuck){var t=this.element;t.addClass("is-stuck"),this.reStick(!0),this.stuck=!0,this.options.toggleHeight&&t.css("height",this.unstuckHeight),this.options.toggleWidth&&t.css("width",this.unstuckWidth),this.options.isFooter?this._trigger("stick",null,{where:"bottom",offset:this.element.css("bottom")}):this._trigger("stick",null,{where:"top",offset:this.element.css("top")})}},_unstick:function(){if(this.stuck){var t=this.element;t.removeClass("is-stuck"),t.css("position","absolute"),t.css(this.options.isFooter?"bottom":"top","auto"),this.stuck=!1,this._revertToCssWidthAndHeight(),this._recalculateFixedStuckDimensions(),this._trigger("unstick",null,{where:this.options.isFooter?"bottom":"top"})}},_revertToCssWidthAndHeight:function(){this.options.toggleHeight&&this.element.css("height",this.cssHeight),this.options.toggleWidth&&this.element.css("width",this.cssWidth)},_recalculateFixedStuckDimensions:function(){this.stuck||(this.unstuckWidth=this.element.outerWidth(),this.unstuckHeight=this.element.outerHeight())},_setupDimensions:function(){this._revertToCssWidthAndHeight(),this.replacement.css("width",this.element.outerWidth()).css("height",this.element.outerHeight())},refresh:function(){},handler:null,replacement:null,_getDefaultOffset:function(){return this.options.top?this.options.top.call(this):null},_storedTopOffset:null,_deferCreate:function(){var e=this.options,o=this.replacement=t('<div class="js-stickyWidget-placeholder"></div>'),n=this.element,h=null;s?this.scrollParent$=s:(this.scrollParent$=n.scrollParent(),e.useWindow&&(this.scrollParent$=t(window)));var r=this.isWindow=this.scrollParent$[0]===window,c=this.scrollParent$;n.addClass("js-stickyWidget-toggle"),-1===e.zIndexStart?this.zIndex=i++:this.zIndex=e.zIndexStart,n.css("z-index",this.zIndex),o.insertAfter(n);var l=this;this._recalculateFixedStuckDimensions(),this.cssHeight=n.css("height"),this.cssWidth=n.css("width"),this._setupDimensions(),e.isFooter?this.scrollHandler=function(){var t,s=c.scrollTop()+c.height()-e.bottom.call(l);if(e.stickToEnd){if(s-n.outerHeight()<e.top.call(l))return void l._stickToEnd();l._unstickFromEnd()}t=o.offset().top+o.outerHeight(),r||(t+=c.scrollTop()),s<t?l._stick():l._unstick()}:this.scrollHandler=function(){var t,s=c.scrollTop()+e.top.call(l);if(e.stickToEnd){if(s+n.outerHeight()>=e.bottom.call(l))return void l._stickToEnd();l._unstickFromEnd()}t=o.offset().top,r||(t+=c.scrollTop()),s>=t?l._stick():l._unstick()},this.refresh=this.resizeHandler=function(){var t=n.parent(),s=t.width(),i=t.height();l._storedTopOffset!==l._getDefaultOffset()&&l.reStick(),l.cssWidth=s,l.cssHeight=i,l.unstuckWidth=s,l.unstuckHeight=i,l._setupDimensions(),l.scrollHandler()},c.on("scroll",(function(){h||(h=apex.util.invokeAfterPaint((function(){h=null,l.scrollHandler()})))})),t(window).on("apexwindowresized",this.resizeHandler),n.on("forceresize",this.resizeHandler).css("position","absolute").css(e.isFooter?"bottom":"top","auto"),this.scrollHandler()},_create:function(){var s=this.options;this.stuck=!1,this.stuckToEnd=!1,this.cssWidth=0,this.cssHeight=0,this.unstuckWidth=0,this.unstuckHeight=0,this._storedTopOffset=this._getDefaultOffset(),s.isFooter?(s.top||(s.top=function(){var s=t(this.element).parent().offset().top;return this.isWindow||(s-=this.scrollParent$.offset().top-this.scrollParent$.scrollTop()),s}),s.bottom||(s.bottom=function(){return 0})):(s.top||(s.top=function(){return apex.theme.defaultStickyTop()}),s.bottom||(s.bottom=function(){var s=t(this.element).parent(),i=s.offset().top;return this.isWindow||(i-=this.scrollParent$.offset().top-this.scrollParent$.scrollTop()),i+s.outerHeight()})),this._deferCreate()},_destroy:function(){t(window).off("apexwindowresized",this.resizeHandler),this.scrollParent$.off("scroll",this.scrollHandler),this.replacement.remove(),this.element.removeAttr("style").removeClass("js-stickyWidget-toggle is-stuck").off("forceresize",this.resizeHandler).trigger("apexstickyWidgetdestroyed")}})}(apex.jQuery);